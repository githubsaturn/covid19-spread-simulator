(this["webpackJsonpcovid-19-simulator"]=this["webpackJsonpcovid-19-simulator"]||[]).push([[0],{254:function(e,t,a){e.exports=a(476)},259:function(e,t,a){},264:function(e,t,a){},476:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),s=a(13),i=a.n(s),r=(a(259),a(97)),l=a(44),c=a(222),m=a(36),p=a(205),h=(a(264),a(69));var u={copyObject:e=>JSON.parse(JSON.stringify(e)),isMobile:()=>window.innerWidth<768,getDelayedPromise:e=>e?new Promise((t,a)=>{setTimeout(()=>{t()},e)}):Promise.resolve()};var d=Object(l.c)({globalReducer:function(e={},t){switch(t.type){case"SIZE_CHANGED":return Object(h.a)({},e,{isMobile:u.isMobile()});default:return e}}}),y=(a(144),a(68)),f=(a(72),a(9)),g=(a(73),a(7)),b=(a(267),a(31));class C extends n.Component{render(){const e=this,t=this.props.formInputData;return o.a.createElement("div",null,o.a.createElement(g.a,{type:"flex",gutter:20,align:"bottom",justify:"center"},o.a.createElement(f.a,{xs:{span:12},lg:{span:4}},"Close Circle Size",o.a.createElement(g.a,null,o.a.createElement(b.a,{style:{maxWidth:100},type:"number",min:0,max:100,value:t.closeCircleSize||"",onChange:t=>{const a=u.copyObject(this.props.formInputData);a.closeCircleSize=Number(t.target.value),e.props.updateModel(a)}}))),o.a.createElement(f.a,{xs:{span:12},lg:{span:4}},"Random People Met Daily",o.a.createElement(g.a,null,o.a.createElement(b.a,{style:{maxWidth:100},type:"number",min:0,max:100,value:t.randomPeopleMetDaily||"",onChange:t=>{const a=u.copyObject(this.props.formInputData);a.randomPeopleMetDaily=Number(t.target.value),e.props.updateModel(a)}}))),o.a.createElement(f.a,{xs:{span:12},lg:{span:4}},"Infected days without symptoms",o.a.createElement(g.a,null,o.a.createElement(b.a,{style:{maxWidth:100},type:"number",min:0,max:100,value:t.dayWithoutSymptoms||"",onChange:t=>{const a=u.copyObject(this.props.formInputData);a.dayWithoutSymptoms=Number(t.target.value),e.props.updateModel(a)}}))),o.a.createElement(f.a,{xs:{span:12},lg:{span:4}},"Infected days after showing symptoms",o.a.createElement(g.a,null,o.a.createElement(b.a,{style:{maxWidth:100},type:"number",min:0,max:100,value:t.dayWithSymptoms||"",onChange:t=>{const a=u.copyObject(this.props.formInputData);a.dayWithSymptoms=Number(t.target.value),e.props.updateModel(a)}})))),o.a.createElement("br",null),o.a.createElement(g.a,{type:"flex",gutter:20,align:"bottom",justify:"center"},o.a.createElement("p",null,o.a.createElement("i",null,"All chance percentages below are per person per day"))),o.a.createElement(g.a,{type:"flex",gutter:20,align:"bottom",justify:"center"},o.a.createElement(f.a,{xs:{span:12},lg:{span:4}},"%"," Chance of infecting close contact before becoming symptomatic",o.a.createElement(g.a,null,o.a.createElement(b.a,{style:{maxWidth:100},type:"number",suffix:"%",min:0,max:100,value:t.chanceOfDangerousContactWithCloseCirclePreSymptoms||"",onChange:t=>{const a=u.copyObject(this.props.formInputData);let n=Number(t.target.value);n>100&&(n=100),a.chanceOfDangerousContactWithCloseCirclePreSymptoms=n,e.props.updateModel(a)}}))),o.a.createElement(f.a,{xs:{span:12},lg:{span:4}},"%"," Chance of infecting close contact after becoming symptomatic",o.a.createElement(g.a,null,o.a.createElement(b.a,{style:{maxWidth:100},type:"number",suffix:"%",min:0,max:100,value:t.chanceOfDangerousContactWithCloseCirclePostSymptoms||"",onChange:t=>{const a=u.copyObject(this.props.formInputData);let n=Number(t.target.value);n>100&&(n=100),a.chanceOfDangerousContactWithCloseCirclePostSymptoms=n,e.props.updateModel(a)}}))),o.a.createElement(f.a,{xs:{span:12},lg:{span:4}},"%"," Chance of infecting random contact before becoming symptomatic",o.a.createElement(g.a,null,o.a.createElement(b.a,{style:{maxWidth:100},type:"number",suffix:"%",min:0,max:100,value:t.chanceOfDangerousContactWithRandomPeoplePreSymptoms||"",onChange:t=>{const a=u.copyObject(this.props.formInputData);let n=Number(t.target.value);n>100&&(n=100),a.chanceOfDangerousContactWithRandomPeoplePreSymptoms=n,e.props.updateModel(a)}}))),o.a.createElement(f.a,{xs:{span:12},lg:{span:4}},"%"," Chance of infecting random person after becoming symptomatic",o.a.createElement(g.a,null,o.a.createElement(b.a,{style:{maxWidth:100},type:"number",suffix:"%",min:0,max:100,value:t.chanceOfDangerousContactWithRandomPeoplePostSymptoms||"",onChange:t=>{const a=u.copyObject(this.props.formInputData);let n=Number(t.target.value);n>100&&(n=100),a.chanceOfDangerousContactWithRandomPeoplePostSymptoms=n,e.props.updateModel(a)}})))),o.a.createElement("br",null))}}var E=a(26);class S extends n.PureComponent{constructor(...e){super(...e),this.state={opacity:{uv:1,pv:1}},this.handleMouseEnter=e=>{const t=e.dataKey,a=this.state.opacity;this.setState({opacity:Object(h.a)({},a,{[t]:.5})})},this.handleMouseLeave=e=>{const t=e.dataKey,a=this.state.opacity;this.setState({opacity:Object(h.a)({},a,{[t]:1})})}}render(){const e=this.state.opacity;if(!this.props.sickCountAtDay.length)return o.a.createElement("div",{style:{height:350}});const t=[];for(let a=0;a<this.props.sickCountAtDay.length;a++){const e=this.props.sickCountAtDay[a];t.push({x:a,hypotheticalHealthCareCapacity:25,totalInfectedPercent:e.totalCases,activeCases:e.activeCaseCount})}return console.log(t),o.a.createElement("div",null,o.a.createElement(g.a,null,o.a.createElement(f.a,{lg:{span:24}},o.a.createElement(E.e,{height:350,width:"100%"},o.a.createElement(E.d,{data:t,margin:{top:5,right:30,left:20,bottom:5}},o.a.createElement(E.a,{strokeDasharray:"3 3"}),o.a.createElement(E.f,{label:"Day",angle:45,dy:10,height:80,dataKey:"x"}),o.a.createElement(E.g,{label:{value:"Number of Cases",angle:-90},tick:!1,domain:[0,100]}),o.a.createElement(E.b,{onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave}),o.a.createElement(E.c,{name:"Total Infected",type:"monotone",dataKey:"totalInfectedPercent",strokeOpacity:e.pv,stroke:"#8884d8",activeDot:{r:8}}),o.a.createElement(E.c,{name:"Ongoing Cases",type:"monotone",dataKey:"activeCases",strokeOpacity:e.uv,stroke:"#0084d8",activeDot:{r:8}}),o.a.createElement(E.c,{name:"Healthcare System Capacity",type:"monotone",dataKey:"hypotheticalHealthCareCapacity",strokeOpacity:e.uv,stroke:"#ff84ff"}))))))}}let P;!function(e){e[e.NORMAL=0]="NORMAL",e[e.SICK=1]="SICK",e[e.POST_SICK=2]="POST_SICK"}(P||(P={}));class v{constructor(e){this.inputParams=e,this.people=[],this.dayNow=0,e.chanceOfDangerousContactWithCloseCirclePostSymptoms/=100,e.chanceOfDangerousContactWithCloseCirclePreSymptoms/=100,e.chanceOfDangerousContactWithRandomPeoplePostSymptoms/=100,e.chanceOfDangerousContactWithRandomPeoplePreSymptoms/=100;for(let t=0;t<e.entirePopulationSize;t++)this.people.push({state:P.NORMAL});for(let t=0;t<e.initialSickPopulation;t++){const t=this.people[this.getRandomBound(0,e.entirePopulationSize)];t.state=P.SICK,t.dayGotSick=0}}getRandomBound(e,t){return Math.floor(Math.random()*(t-e)+e)}runOneDay(){this.dayNow=this.dayNow+1;for(let e=0;e<this.inputParams.entirePopulationSize;e++)this.people[e].state===P.SICK&&this.runOneDayForPatient(e)}makePersonSick(e){this.people[e].state=P.SICK,this.people[e].dayGotSick=this.dayNow}runOneDayForPatient(e){const t=this.inputParams.closeCircleSize+1,a=this.people[e].dayGotSick;if(0!==a&&!a)throw new Error("Patient should be sick!");for(let n=0;n<t;n++){let o=e-Math.floor(t/2)+n;o!==e&&(o<0&&(o+=this.inputParams.entirePopulationSize),o>=this.inputParams.entirePopulationSize&&(o-=this.inputParams.entirePopulationSize),this.people[o].state===P.NORMAL&&(a+this.inputParams.dayWithoutSymptoms>this.dayNow?Math.random()<this.inputParams.chanceOfDangerousContactWithCloseCirclePreSymptoms&&this.makePersonSick(o):Math.random()<this.inputParams.chanceOfDangerousContactWithCloseCirclePostSymptoms&&this.makePersonSick(o)))}for(let n=0;n<this.inputParams.randomPeopleMetDaily;n++){const e=this.getRandomBound(0,this.inputParams.entirePopulationSize);this.people[e].state===P.NORMAL&&(a+this.inputParams.dayWithoutSymptoms>this.dayNow?Math.random()<this.inputParams.chanceOfDangerousContactWithRandomPeoplePreSymptoms&&this.makePersonSick(e):Math.random()<this.inputParams.chanceOfDangerousContactWithRandomPeoplePostSymptoms&&this.makePersonSick(e))}this.dayNow===this.inputParams.dayWithSymptoms+this.inputParams.dayWithoutSymptoms+a&&(this.people[e].state=P.POST_SICK)}}class D extends n.Component{render(){return o.a.createElement("div",null,o.a.createElement(g.a,null,o.a.createElement(f.a,null,o.a.createElement("h3",null,"A Simple Monte Carlo Take on Coronavirus Community Spread"),o.a.createElement("p",null,"The model is open source and the source code is available on"," ",o.a.createElement("a",{rel:"noopener noreferrer",target:"_blank",href:"https://github.com/githubsaturn/covid19-spread-simulator","aria-label":"Star on GitHub"},"GitHub")),o.a.createElement("iframe",{title:"GitHub button",src:"https://ghbtns.com/github-btn.html?user=githubsaturn&repo=covid19-spread-simulator&type=star&count=false&size=large",scrolling:"0",frameBorder:0,width:"160px",height:"30px"}),o.a.createElement("div",{style:{height:30}}),o.a.createElement("p",null,"This model uses a simple Monte Carlo approach to simulate what happens in a community and how the virus gets people infected. This model runs random numbers for each day and based on randomized numbers it decides whether or not an individual is infected. Since the basis of this model is based on Monte Carlo method, we need to run the simulation many times and calculate the average. For the purpose of this browser based simulator, a total population of 5000 is being simulated for 150 days. The simulation gets repeated 10 times and the average numbers will be plotted on the graph."),o.a.createElement("p",null,"The input to this model are as follows:"),o.a.createElement("ul",null,this.createInputDescription("Close Circle Size","Simply the average number of close contacts that a person has"),this.createInputDescription("Random People Met Daily","Simply the average number of random people that a person meets per day"),this.createInputDescription("Infected days without symptoms","The number of days that an infected person is infectious before displaying any symptoms"),this.createInputDescription("Infected days after showing symptoms","The number of days that the patient remains infectious after displaying symptoms"),this.createInputDescription("Chance of infecting close contact before becoming symptomatic PER DAY","This indicates the chance of infecting a close contact person per day before displaying symptoms. For example, if the chance is 20% per day, the chance of infecting this person eventually over a span of 14 days, for example, is 1 - 0.8^14, or 95%."),this.createInputDescription("Chance of infecting close contact after becoming symptomatic PER DAY",'Similar to above, except, this is an indicator for the chance "after being symptomatic". This essentially a lower number due to the natural extra care taken by people when they are sick such as being more careful to not spread the germs'),this.createInputDescription("Chance of infecting random contact before becoming symptomatic PER DAY","Similar to the close circle one, except this is for random people, like a person sitting next to you on subway. This is essentially a lower number as there is a lower chance of you making a risky contact with a random person. Usually the non close contact risk comes from touching the same objects, such as hand rails and etc."),this.createInputDescription("Chance of infecting random person after symptoms PER DAY","Similar to the previous one, except this is for after being symptomatic. This is the lowest number as, usually, when people get sick they avoid going to public")),o.a.createElement("p",null,"DISCLAIMER: This model is only for demonstration only and it has not been clinically verified."))))}createInputDescription(e,t){return o.a.createElement("li",null,o.a.createElement("h3",null,e,":"),o.a.createElement("p",null,t))}}class w extends n.Component{constructor(e){super(e),this.mainContainer=void 0,this.updateDimensions=()=>this.props.emitSizeChanged(),this.mainContainer=o.a.createRef(),this.state={sickCountAtDay:[],collapsed:!1,formInputData:{closeCircleSize:2,randomPeopleMetDaily:2,chanceOfDangerousContactWithCloseCirclePreSymptoms:25,chanceOfDangerousContactWithCloseCirclePostSymptoms:5,chanceOfDangerousContactWithRandomPeoplePreSymptoms:2,chanceOfDangerousContactWithRandomPeoplePostSymptoms:1,dayWithoutSymptoms:4,dayWithSymptoms:10,entirePopulationSize:5e3,initialSickPopulation:5}},setTimeout(()=>{this.runSimulation()},700)}componentWillUnmount(){super.componentWillUnmount&&super.componentWillUnmount(),this.updateDimensions(),window.removeEventListener("resize",this.updateDimensions)}componentDidUpdate(e){this.props.location.pathname!==e.location.pathname&&this.props.isMobile&&this.setState({collapsed:!0})}componentDidMount(){this.updateDimensions(),window.addEventListener("resize",this.updateDimensions)}runSimulation(){const e=this,t=[];for(let r=0;r<10;r++){const a=new v(u.copyObject(e.state.formInputData));for(let e=0;e<150;e++){a.runOneDay();const e=5e3-a.people.filter(e=>e.state===P.NORMAL).length;t.push({day:a.dayNow,sickPeopleCount:e})}}const a=[];for(let r=0;r<150;r++)t.forEach(e=>{e.day===r+1&&(a[r]=(a[r]?a[r]:0)+e.sickPeopleCount)});const n=a.map(e=>e/10*.02),o=[];for(let r=0;r<n.length;r++){const e=n[r];0!==r?o.push(Math.max(0,e-n[r-1])):o.push(e)}for(;n.length;)n.pop();for(let r=0;r<o.length;r++){const e=r>0?n[r-1]:0;n.push(o[r]+e)}const s=[],i=e.state.formInputData.dayWithSymptoms+e.state.formInputData.dayWithoutSymptoms;for(let r=0;r<o.length;r++){const e=n[r];s.push({totalCases:e,activeCaseCount:e-(r>=i?n[r-i]:0)})}e.setState({sickCountAtDay:s})}render(){const e=this,t=e.state.formInputData;return o.a.createElement("div",{key:e.props.rootElementKey,ref:e.mainContainer,style:{padding:e.props.isMobile?10:35}},o.a.createElement(g.a,{type:"flex",justify:"center"},o.a.createElement("h2",null,"Coronavirus Spread Simulator")),o.a.createElement(g.a,{type:"flex",justify:"center"},o.a.createElement("p",null,o.a.createElement("small",null,o.a.createElement("i",null,"The model is"," ",o.a.createElement("a",{rel:"noopener noreferrer",target:"_blank",href:"https://github.com/githubsaturn/covid19-spread-simulator","aria-label":"Star on GitHub"},"open-sourced"),". See model description and disclaimer below.")))),o.a.createElement(g.a,{type:"flex",justify:"center"},o.a.createElement(f.a,{lg:{span:10}},o.a.createElement("p",null,"The goal of this model is to show how easy it is to completely overwhelm the healthcare system and cause tens of thousands of lives being compromised. Simply change random people met daily from 2 to 3 and observe the load on healthcare system!"),o.a.createElement("p",null,o.a.createElement("b",null,"REMEMBER:")," The goal is to flatten the curve! If you aren't unsure why, this"," ",o.a.createElement("a",{rel:"noopener noreferrer",target:"_blank",href:"https://www.npr.org/sections/health-shots/2020/03/13/815502262/flattening-a-pandemics-curve-why-staying-home-now-can-save-lives"},"article")," ","explains why this is extremely crucial now."))),o.a.createElement("div",{style:{height:30}}),o.a.createElement(C,{updateModel:t=>{e.setState({formInputData:u.copyObject(t)})},formInputData:t}),o.a.createElement("div",{style:{height:10}}),o.a.createElement(g.a,{type:"flex",align:"middle",justify:"center"},o.a.createElement(y.a,{onClick:()=>{e.runSimulation()},type:"primary",shape:"round",icon:"bar-chart",size:"large"},"Recalculate")),o.a.createElement("div",{style:{height:30}}),o.a.createElement(S,{sickCountAtDay:e.state.sickCountAtDay}),o.a.createElement("div",{style:{height:80}}),o.a.createElement(D,null))}}var O=Object(r.b)((function(e){return{rootElementKey:e.globalReducer.rootElementKey,isMobile:e.globalReducer.isMobile}}),{emitSizeChanged:function(){return{type:"SIZE_CHANGED",payload:{}}}})(w);const x=Object(l.a)(p.a)(l.d);class k extends n.Component{render(){return o.a.createElement("div",null,o.a.createElement(r.a,{store:x(d)},o.a.createElement(c.a,null,o.a.createElement(m.c,null,o.a.createElement(m.a,{path:"/",component:O})))))}}var M=k;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement(M,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(e=>{e.unregister()})}},[[254,1,2]]]);
//# sourceMappingURL=main.60494155.chunk.js.map